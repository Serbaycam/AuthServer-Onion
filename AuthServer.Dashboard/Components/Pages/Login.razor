@page "/login"
@layout AuthLayout 
@* Layout'u birazdan oluşturacağız *@

<div class="d-flex align-items-center justify-content-center vh-100 bg-light">
    <div class="card shadow-lg" style="width: 400px;">
        <div class="card-header bg-dark text-white text-center py-3">
            <h4 class="mb-0">IDMS Panel</h4>
        </div>
        <div class="card-body p-4">
            
            @if (!string.IsNullOrEmpty(Error))
            {
                <div class="alert alert-danger text-center">
                    Email veya şifre hatalı!
                </div>
            }

            @* DİKKAT: method="post" ve action="/account/login" *@
            @* Bu form direkt Controller'a gider, Blazor araya girmez. *@
            <form method="post" action="/account/login">
                
                @* CSRF Koruması için Blazor'ın token'ını ekle *@
                <AntiforgeryToken />

                <div class="mb-3">
                    <label class="form-label">Email Adresi</label>
                    <input type="email" name="Email" class="form-control" required placeholder="admin@lab.local" />
                </div>

                <div class="mb-3">
                    <label class="form-label">Şifre</label>
                    <input type="password" name="Password" class="form-control" required placeholder="******" />
                </div>

                <button type="submit" class="btn btn-primary w-100 py-2">Giriş Yap</button>
            </form>
        </div>
        <div class="card-footer text-center text-muted">
            <small>AuthServer v1.0</small>
        </div>
    </div>
</div>

@code {
    [SupplyParameterFromQuery]
    public string? Error { get; set; }
}